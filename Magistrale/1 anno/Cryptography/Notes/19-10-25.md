primality test 

we just need 2 prime numbers the sieve finds all -> for smallest rsa modulud 2^3072 

miller rabin test 

non deterministic is non bias monte carlo test -> if it says that a number is not prime than correct otherwise small cahce of mistake -> 1/4 probability 

run multiple times if tells no yes -> re doit than 1/4^r of error 

complexity will be log^3 n -> log n mult with each cost of log^2 n 

test -> 
1. write n-1 than decompose to the biggest power of 2 multiplied with whatever is left for 6 -> 2^1 * 3 -> k=1 , m=3
2. pick random number between 1 and n 
3. write b = a^m \mod n 
4. if b=1 return true -> number is prime
5. otherwise for loop in k 
6. if b is n-1 return true 
7. b = b\*b \mod n 
8. return false if never returned true 

useless to run if even number as input 

proof of non biasedness no is always true :

assume by contradiction that we get a false but the number is prime 
we need to pass all the previous tests 
initially b not 1 
everytime i square b was not n-1 

b = a^m \mod n != 1 from the first test 
b = b * b \mod n-> a^2m \mod n != n-1 from the second test 
for each time we go in the loop it will be that we need to go troth the loop so k times -> a^m2^k \mod n  != n-1 

if we confront a smaller than n a must be coprime with n than we need to have that a^phi(n) mod n = 1 
??????

r^2 mod n = 1 if n is prime r^2 must than be r^2 = z\*n +1 for some z 
than we can write r^2 -1 = z\*n -> (r-1)(r+1) = z\*n 
$(r-1)(r+1)/n = z$ if n is prime and z is integer than n must divide r-1 or r+1 

if r-1 is the divisor than it must be k_1 * n -> r = k_1 * n +1
r+1 must be k_2 * n -> r = k_2 * n - 1 -> if we work mod n than -1 is like writing n-1

one of the 2 has to hold 

than either 1 or n-1 must be the square root of the number 

if n is prime than the niÃ¬umber that will give me one with the mod to that number will be 1^2 and n-1\^2 

in the algorithm each of the values ithe square of the previous one 

going back to the chain -> at the start we get that the first must be the square of 1 -> but it should have passed the first test so this is a contradiction 

a^2^k n as a square we can write it like (a^2^(k-1) n) ^2 a elevated must be 1 or n-1 if 1 ok ,,, if n-1 its impossible for the previous rule  than r =1 it will hold until the first chain rule and arrive at previous contraddiction  

#todo understand this 

millerrabin test suggestion by nist

++++ is proof that its running miller rabni test to test chosen numbers 