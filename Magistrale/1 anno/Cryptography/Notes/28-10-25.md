Longer messages -> procedure to extend keys  

at every round of the substitution process is that it get's applied always to a different input matrix 

start with addroundkey -> other rounds subbytes shiftrows mixcolums addroundkey 
last round only subbytes shiftrows addrounf keys

longer messages -> generate a stream of keys from the first one -> number depends on the number of rounds -> each key is generated with similar operation to aes 
4 ( nr of rounds + 1)
each of the keys for each round

decryption 

computed by applying the inverse operations 
invshiftrows -> shift in the other direction 
invsubbytes -> different table
addroundkey same just a xor
invmixcolums -> different matrix mult (inverse matrix)

if you dont run 10 rounds+ you can attack the cipher 

key rec -> best strategies only -2 power operation in respect to the key lenght

examples --

block cipher modes 

long message i want to encode it with any cipher longer than the block size 

depends on operation that i want to do like care integrity / fast 

ECB -> electronic codebook -> plaintext split into blocks for each one we use the same key to encrypt and decrypt

pros > fast run each of enc adn dec in parallel
cons -> if (first one)one block is insecure than we can decript anything else 

absence of integrity -> in the middle we can swap / add / remove more blocks -> since each block is independent

CBC -> cipher block chaining -> different key for each block determined by the previous encrypted block like -> same key always but the input block in the encryption gets initially cored by IV (we need to share this) -> next step x_2 xor with the output of the prev encryption 

decryption same but the output will be xored with IV and tthan use the previous input to xor 

worse preformance cant parallelize 

mimt -> if attacker sees y_1 anad changes something -> will propaget to the other encryptions ??? 

---

$D_k^{CBC}(E_k^{CBC}(x_i)) = x_i$
$y_2 = E_k^{CBC}(x_2 \oplus y_1)$
$y_i = E_k^{CBC}(x_i \oplus y_{i-1})$

$D_k(E_k(x_i \oplus y_{i-1})) \oplus y_{i-1}$  

